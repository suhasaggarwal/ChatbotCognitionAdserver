<div id="scrollTop" class="headerContent">
    <div id="article-view" class="page-header page-header-default margin-12">
        <div class="page-header-content padding-top-10 over-view-class">        
            <div class="row">
                <div class="col-lg-3" ng-if="vm.stackedPublishedChartData != null">
                    <h5 class="text-bold pull-left col-lg-12 head-heading" style="padding: initial;"><span>{{ vm.headerTitle}}</span><span ng-show="vm.name"> - </span><span>{{vm.name}}</span></h5>
                </div>
                <div class="col-lg-5" ng-if="vm.stackedPublishedChartData == null">
                     <h5 class="text-bold pull-left col-lg-12 head-heading"><span>{{ vm.headerTitle}}</span><span ng-show="vm.name"> - </span><span>{{vm.name}}</span></h5>
                </div>
                <div class="col-lg-2" ng-if="vm.stackedPublishedChartData != null">
                    <div >
                        <h5 class="text-center text-bold card-heading">Posts Published</h5>
                        <div class="text-bold text-center key-metrics-number">{{vm.postsPublished ? vm.postsPublished : 0}}</div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div ng-show="vm.stackedPublishedChartData" style="min-width: 100px; min-height: 10px;">
                    <h5 class="text-center text-bold card-heading">Publishing Trends</h5>
                    <div class="col-lg-3" ng-show="vm.stackedPublishedChartData.responseData != 0" style="margin-left: -43px;">
                         <cr-head-analytic-stack-bar-chart></cr-head-analytic-stack-bar-chart>
                    </div>
                        <div ng-if="vm.stackedPublishedChartData.responseData == 0" ng-repeat="message in vm.stackedPublishedChartData.messageStatus" class="col-lg-12">
                            <p class="text-center" style="color: #64c1ac; font-size: 15px;">{{message}}</p>
                        </div>
                    </div>
                    <div ng-show="vm.deviceName">
                        <h5 class="text-center text-bold card-heading">User Type</h5>
                        <div class="text-center capitalize-text" ng-repeat="visitor in vm.visitorType">
                           {{visitor.visitorType}}
                        </div>
                        <div ng-if="vm.deviceName.data == 0" ng-repeat="message in vm.deviceName.messageStatus" class="col-lg-12">
                            <p class="text-center" style="color: #64c1ac; font-size: 15px;">{{message}}</p>
                        </div>
                    </div>
                </div>
                <cr-common-date-picker></cr-common-date-picker>
            </div>
        </div>
    </div>
    <cr-filter-history-dir ng-if="vm.filterTextStatus" style="margin-top: -20px;"></cr-filter-history-dir>
    <div class="tab-menu" ng-if="vm.topNavigationStatus == true" style="margin-left: -8px;margin-right: -8px;">
        <div id="menu-center" class="row">
        <div id="sticky-anchor"></div>
            <ul class="nav nav-tabs" id="sticky-nav" style="margin-bottom:5px !important">
                <li role="presentation" class="active" id="summary"><a href="#key-metric-link" ng-click="vm.gotoAnchor(1,$event)">Summary</a></li>
                <li role="presentation"><a class="tab-menu" href="#audience-profile-section" target="_blank"
                data-target="_self" ng-click="vm.gotoAnchor(2,$event)">Engagement</a></li>
                <li role="presentation" id="isegment"><a class="tab-menu" href="#interest-segment-section" target="_self" ng-click="vm.gotoAnchor(3,$event)">Performance</a></li>
                <li class="pull-right pageview-section">
                    <label  class="audience-keymetric-label">{{ vm.selectMatricLabel }}</label>
                    <ul class="breadcrumb-elements pull-right" style="margin-top: 3px;">
                        <li class="dropdown">
                            <a href="#" data-toggle="dropdown" class="dropdown-toggle drop-down-icon-fix" style="background-color: transparent"><b class="caret"></b></a>
                            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                <li ng-repeat="value in vm.templateData.dropdownValues.keyMetric">
                                    <a href="javascript:void(0)" ng-click="vm.keyMetricFitler( value.apifilter )">{{ value.dropdown }}</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <script>
    $(document).ready(function(){
        $("a.tab-menu").on('click', function(event) {
            $(".tab-menu .nav-tabs li").removeClass("active");
            $(this).parent().addClass("active");
            if (this.hash !== "") {
                event.preventDefault();
                var hash = this.hash;
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 800, function(){
                    window.location.hash = hash;
                });
            }
        });
        $(document).on("scroll", onScroll);
        function onScroll(event){
            var scrollPos = $(document).scrollTop();
            var div_top = $('#sticky-anchor').offset() ? $('#sticky-anchor').offset().top : 0;
            if (scrollPos > div_top) {
                $('#sticky-nav').addClass('stick-nav');
                $('#sticky-anchor').height($('#sticky-nav').outerHeight());
            } else {
                $('#sticky-nav').removeClass('stick-nav');
                $('#sticky-anchor').height(0);
            }
            $('#menu-center a').each(function () {
                var currLink = $(this);
                var refElement = $(currLink.attr("href"));
                if ((refElement.position().top - 70) <= scrollPos && (refElement.position().top + refElement.height() + 70) > scrollPos) {
                    $('#menu-center ul li').removeClass("active");
                    currLink.parent().addClass("active");
                }
                else{
                    currLink.parent().removeClass("active");
                }
                if(scrollPos <= 150){
                    $("#summary").addClass("active");
                }
            });
        }
     });
</script>
</div>
